(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"bg-dark"},[a("q-toolbar",[a("q-toolbar-title",[t._v("BanGround Konsole")]),a("q-btn",{attrs:{round:"",flat:"",icon:"settings",disable:t.disable},on:{click:function(e){t.isHostEditDialogDisplay=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.isHostEditDialogDisplay,callback:function(e){t.isHostEditDialogDisplay=e},expression:"isHostEditDialogDisplay"}},[a("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Edit Host")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),a("q-card-section",[a("q-input",{attrs:{dark:""},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1)],1)],1)],1),a("q-btn",{attrs:{round:"",flat:"",icon:"add",disable:t.disable},on:{click:function(e){t.isAirDropDialogDisplay=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.isAirDropDialogDisplay,callback:function(e){t.isAirDropDialogDisplay=e},expression:"isAirDropDialogDisplay"}},[a("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Kirapack Air Drop")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),a("q-card-section",[a("div",{ref:"select_frame",staticClass:"full-width text-center column justify-center items-center",staticStyle:{border:"3px dashed white",height:"350px","border-radius":"5px"},on:{dragenter:function(e){return t.onDragEnter(e)},drop:function(e){return t.onDrop(e)},dragleave:function(e){return t.onDragLeave(e)},dragover:function(e){return t.onDragOver(e)}}},[a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{color:"primary",label:"Click to select a kirapack"},on:{click:t.onSelectEvent}}),a("q-input",{ref:"selectInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".kirapack"},on:{change:function(e){return t.airdrop(e.target.files)}}})],1),a("div",{staticClass:"col-auto q-mt-md"},[t._v("\n                  Or drop a kirapack here\n                ")])])])],1)],1)],1)],1)],1),a("q-page-container",[a("q-page",{staticClass:"bg-grey-10 text-white q-pa-md",attrs:{id:"consolePage"}},[a("div",{staticClass:"text-body2",staticStyle:{"white-space":"pre-wrap","font-family":"monospace"},attrs:{id:"outputContainer"},domProps:{innerHTML:t._s(t.log)}}),a("div",{attrs:{id:"locator"}})])],1),a("q-footer",{staticClass:"q-pa-sm bg-dark"},[a("q-form",{attrs:{autofocus:""},on:{submit:t.submit}},[a("div",{staticClass:"row q-col-gutter-md items-center"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{dark:"",outlined:"",dense:"",autocomplete:"off"},on:{input:t.onInputEvent,keydown:t.onKeyDownEvent},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("q-menu",{attrs:{"no-focus":"",dark:"","auto-close":""},model:{value:t.isAutoCompleteMenuDisplay,callback:function(e){t.isAutoCompleteMenuDisplay=e},expression:"isAutoCompleteMenuDisplay"}},[a("q-list",t._l(t.filterOptions,(function(e){return a("q-item",{key:e.value,attrs:{clickable:"",active:e.active,dark:""},on:{click:function(a){t.input=e.value}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.value))]),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.type))])],1)],1)})),1)],1)],1)],1),a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{type:"submit",label:"Send",dark:"",disable:!t.websocket.it||1!=t.websocket.it.readyState||t.disable}})],1)])])],1)],1)},o=[],i=(a("a481"),a("7f7f"),a("aef6"),a("c5f6"),a("04ff"),a("a34a")),r=a.n(i),n=(a("96cf"),a("c973")),l=a.n(n),c=a("0831"),u=a("1c16"),p={name:"PageIndex",data:function(){return{disable:!1,options:[{value:"g_cheats",type:"KVar",help:"Enable Cheats"},{value:"savecfg",type:"Kommand",help:"Save configs"},{value:"exec",type:"Kommand",help:"Execute a config file"},{value:"echo",type:"Kommand",help:"Repeater"},{value:"help",type:"Kommand",help:"List available kommands and kvars"},{value:"snd_bgm_volume",type:"KVar",help:""},{value:"snd_se_volume",type:"KVar",help:""},{value:"snd_igse_volume",type:"KVar",help:""},{value:"cl_language",type:"KVar",help:""},{value:"snd_engine",type:"KVar",help:""},{value:"snd_buffer_bass",type:"KVar",help:""},{value:"snd_buffer_fmod",type:"KVar",help:""},{value:"snd_output",type:"KVar",help:""},{value:"o_judge",type:"KVar",help:""},{value:"o_audio",type:"KVar",help:""},{value:"r_notespeed",type:"KVar",help:""},{value:"r_notesize",type:"KVar",help:""},{value:"r_syncline",type:"KVar",help:""},{value:"r_lanefx",type:"KVar",help:""},{value:"r_graynote",type:"KVar",help:""},{value:"r_mirror",type:"KVar",help:""},{value:"r_bang_perspect",type:"KVar",help:""},{value:"r_shake_flick",type:"KVar",help:""},{value:"r_usevideo",type:"KVar",help:""},{value:"r_farclip",type:"KVar",help:""},{value:"r_brightness_bg",type:"KVar",help:""},{value:"r_brightness_lane",type:"KVar",help:""},{value:"r_brightness_long",type:"KVar",help:""},{value:"cl_showms",type:"KVar",help:""},{value:"cl_elp",type:"KVar",help:""},{value:"cl_offset_transform",type:"KVar",help:""},{value:"cl_notestyle",type:"KVar",help:""},{value:"cl_sestyle",type:"KVar",help:""},{value:"mod_autoplay",type:"KVar",help:""},{value:"cl_cursorter",type:"KVar",help:"Current sorter type"},{value:"cl_lastsid",type:"KVar",help:"Current chart set id"},{value:"demo_play",type:"Kommand",help:"Play a demo file"},{value:"fs_assetpath",type:"KVar",help:""},{value:"fs_iconpath",type:"KVar",help:""}],autoCompleteFirst:"",filterOptions:[],isAirDropDialogDisplay:!1,isHostEditDialogDisplay:!1,isAutoCompleteMenuDisplay:!1,websocket:{it:null,closed:!0},log:"",input:"",header:"BanGround-Konsole Version 0.2.0\nAuthor: GEEKiDoS, ReiKohaku\n"}},computed:{host:{get:function(){return this.$store.state.host},set:function(t){this.$store.commit("updateHost",t)}}},methods:{stdout:function(t){var e=t;this.log="".concat(this.log).concat(e,"\r"),this.autoLocate()},autoLocate:function(){var t=document.getElementById("locator"),e=c["a"].getScrollTarget(t),a=t.offsetTop-t.scrollHeight,s=100;c["a"].setScrollPosition(e,a,s)},onInputEvent:function(){var t=this;return l()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isAutoCompleteMenuDisplay=!1,e.next=3,t.onFilterEvent();case 3:case"end":return e.stop()}}),e)})))()},onFilterEvent:function(){var t=this;return l()(r.a.mark((function e(){var a,s,o;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.filterOptions=[],t.autoCompleteFirst=t.input,!t.input||""==t.input){e.next=16;break}return e.prev=3,e.next=6,t.$axios.get("/commands");case 6:a=e.sent,s=a.data,t.options=s,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),t.stdout("Get command list failed.");case 14:o=t.input.toLowerCase(),t.filterOptions=t.options.filter((function(t){return t.value.toLowerCase().indexOf(o)>-1}));case 16:t.filterOptions&&t.filterOptions.length>0&&(t.isAutoCompleteMenuDisplay=!0);case 17:case"end":return e.stop()}}),e,null,[[3,11]])})))()},onKeyDownEvent:function(t){if(9===t.keyCode&&this.filterOptions&&this.filterOptions.length>0){for(var e in t.stopPropagation(),t.preventDefault(),this.filterOptions){var a=Number.parseInt(e);if(this.filterOptions[a].value===this.input)return void(this.input=this.filterOptions[a+1]?this.filterOptions[a+1].value:this.autoCompleteFirst)}this.input=this.filterOptions[0].value}},onSelectEvent:function(){this.$refs.selectInput.$el.click()},airdrop:function(t){var e=this;this.isAirDropDialogDisplay=!1,this.disable=!0;try{for(var a=0;a<t.length;a++){var s=t[a];if(s.name.endsWith(".kirapack")){this.stdout("Transfer ".concat(s.name,"..."));var o=new FileReader;o.onloadend=function(t){t.target.readyState==FileReader.DONE&&e.$axios.put("http://".concat(e.host,"/airdrop"),t.target.result)},o.readAsArrayBuffer(s)}}}catch(i){}this.disable=!1},onDrop:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white",this.airdrop(t.dataTransfer.files)},onDragLeave:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white"},onDragEnter:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},onDragOver:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},submit:function(){var t=this;return l()(r.a.mark((function e(){var a;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.input){e.next=2;break}return e.abrupt("return");case 2:if(a=t.input.replace(/(^\s*)|(\s*$)/g,""),0!==a.length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.websocket.it.send(a);case 7:t.stdout(a),t.input=null;case 9:case"end":return e.stop()}}),e)})))()},initWebSocket:function(){this.stdout("==== Init WebSocket ===="),window.WebSocket||this.stdout("!!! This browser does not support WebSocket!"),this.websocketConnect()},websocketConnect:function(){var t=location.href.replace("http", "ws").concat("websocket");this.websocket.it=new WebSocket(t),this.websocket.it.onmessage=this.websocketOnMessage,this.websocket.it.onopen=this.websocketOnOpen,this.websocket.it.onerror=this.websocketOnError,this.websocket.it.onclose=this.websocketClose,this.websocket.closed=!1},websocketOnMessage:function(t){try{var e=JSON.parse(t.data),a=[];if(e["mHeaders"]&&(a=e["mHeaders"]),e["cHeaders"])for(var s in this.stdout("==== Chart List ===="),e["cHeaders"]){var o=e["cHeaders"][s];if(this.stdout("[".concat(o.sid,"]")),a)for(var i in a)a[i].mid===o.mid&&(this.stdout("  Title: ".concat(a[i].title)),this.stdout("  Artist: ".concat(a[i].artist)));else this.stdout("  Music: ".concat(o.mid));for(var r in this.stdout("  Author: ".concat(o.author)),this.stdout("  Difficulties:"),o.difficultyLevel){var n=["Easy","Normal","Hard","Expert","Special"];-1!=o.difficultyLevel[r]&&this.stdout("    ".concat(n[r]," ").concat(o.difficultyLevel[r]))}this.stdout("")}}catch(l){this.stdout(t.data)}},websocketOnOpen:function(){var t=this;return l()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.stdout("==== Init WebSocket Successfully ====");case 1:case"end":return e.stop()}}),e)})))()},websocketOnError:function(t){this.stdout("!!! A WebSocket error occurred"),this.stdout("==== Reconnecting WebSocket ===="),this.websocketConnect()},websocketClose:function(t){this.stdout("==== WebSocket Connection Closed ====")}},destroyed:function(){this.websocket.it.close()},mounted:function(){var t=this;return l()(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.title="BanGround Konsole",t.autoLocate=Object(u["a"])(t.autoLocate,100),t.onFilterEvent=Object(u["a"])(t.onFilterEvent,500),t.stdout(t.header),t.initWebSocket();case 5:case"end":return e.stop()}}),e)})))()}},d=p,h=a("2877"),f=a("4d5a"),v=a("e359"),m=a("65c6"),b=a("6ac5"),y=a("9c40"),k=a("24e8"),g=a("f09f"),w=a("a370"),_=a("2c91"),D=a("27f9"),K=a("09e3"),C=a("9989"),x=a("7ff0"),q=a("0378"),V=a("4e73"),O=a("1c1c"),S=a("66e5"),E=a("4074"),A=a("0170"),Q=a("7f67"),L=a("eebe"),H=a.n(L),I=Object(h["a"])(d,s,o,!1,null,null,null);e["default"]=I.exports;H()(I,"components",{QLayout:f["a"],QHeader:v["a"],QToolbar:m["a"],QToolbarTitle:b["a"],QBtn:y["a"],QDialog:k["a"],QCard:g["a"],QCardSection:w["a"],QSpace:_["a"],QInput:D["a"],QPageContainer:K["a"],QPage:C["a"],QFooter:x["a"],QForm:q["a"],QMenu:V["a"],QList:O["a"],QItem:S["a"],QItemSection:E["a"],QItemLabel:A["a"]}),H()(I,"directives",{ClosePopup:Q["a"]})}}]);