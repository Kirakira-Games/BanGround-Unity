(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-layout",{attrs:{view:"lHh Lpr lFf"}},[o("q-header",{staticClass:"bg-dark"},[o("q-toolbar",[o("q-toolbar-title",[t._v("BanGround Konsole")]),o("q-btn",{attrs:{round:"",flat:"",icon:"settings",disable:t.disable},on:{click:function(e){t.isHostEditDialogDisplay=!0}}},[o("q-dialog",{attrs:{persistent:""},model:{value:t.isHostEditDialogDisplay,callback:function(e){t.isHostEditDialogDisplay=e},expression:"isHostEditDialogDisplay"}},[o("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6"},[t._v("Edit Host")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),o("q-card-section",[o("q-input",{attrs:{dark:""},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1)],1)],1)],1),o("q-btn",{attrs:{round:"",flat:"",icon:"add",disable:t.disable},on:{click:function(e){t.isAirDropDialogDisplay=!0}}},[o("q-dialog",{attrs:{persistent:""},model:{value:t.isAirDropDialogDisplay,callback:function(e){t.isAirDropDialogDisplay=e},expression:"isAirDropDialogDisplay"}},[o("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[o("q-card-section",{staticClass:"row items-center q-pb-none"},[o("div",{staticClass:"text-h6"},[t._v("Kirapack Air Drop")]),o("q-space"),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),o("q-card-section",[o("div",{ref:"select_frame",staticClass:"full-width text-center column justify-center items-center",staticStyle:{border:"3px dashed white",height:"350px","border-radius":"5px"},on:{dragenter:function(e){return t.onDragEnter(e)},drop:function(e){return t.onDrop(e)},dragleave:function(e){return t.onDragLeave(e)},dragover:function(e){return t.onDragOver(e)}}},[o("div",{staticClass:"col-auto"},[o("q-btn",{attrs:{color:"primary",label:"Click to select a kirapack"},on:{click:t.onSelectEvent}}),o("q-input",{ref:"selectInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".kirapack"},on:{change:function(e){return t.airdrop(e.target.files)}}})],1),o("div",{staticClass:"col-auto q-mt-md"},[t._v("\n                  Or drop a kirapack here\n                ")])])])],1)],1)],1)],1)],1),o("q-page-container",[o("q-page",{staticClass:"bg-grey-10 text-white q-pa-md",attrs:{id:"consolePage"}},[o("div",{staticClass:"text-body2",staticStyle:{"white-space":"pre-wrap","font-family":"monospace"},attrs:{id:"outputContainer"},domProps:{innerHTML:t._s(t.log)}}),o("div",{attrs:{id:"locator"}})])],1),o("q-footer",{staticClass:"q-pa-sm bg-dark"},[o("q-form",{attrs:{autofocus:""},on:{submit:t.submit}},[o("div",{staticClass:"row q-col-gutter-md items-center"},[o("div",{staticClass:"col"},[o("q-select",{ref:"inputer",attrs:{behavior:!0===t.$q.platform.is.ios?"dialog":"menu",dark:"",outlined:"","use-input":"",options:t.filterOptions,dense:"",disable:t.disable},on:{"new-value":t.createValue,filter:t.filterFn,input:t.submit},scopedSlots:t._u([{key:"option",fn:function(e){return[o("q-item",t._g(t._b({},"q-item",e.itemProps,!1),e.itemEvents),[o("q-item-section",[o("q-item-label",[t._v(t._s(e.opt))])],1),-1===t.options.indexOf(e.opt)?o("q-item-section",{attrs:{avatar:""},on:{click:function(o){return t.deleOption(e.opt)}}},[o("q-icon",{attrs:{name:"clear"}})],1):t._e()],1)]}}]),model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),o("div",{staticClass:"col-auto"},[o("q-btn",{attrs:{type:"submit",label:"Send",dark:"",disable:!t.websocket.it||1!=t.websocket.it.readyState||t.disable}})],1)])])],1)],1)},i=[],a=o("a34a"),n=o.n(a),r=(o("a481"),o("96cf"),o("c973")),c=o.n(r),l=(o("6762"),o("2fdb"),o("7f7f"),o("aef6"),o("0831")),d=o("1c16"),u=["hello"],p={name:"PageIndex",data:function(){return{disable:!1,options:["hello"],filterOptions:u,isAirDropDialogDisplay:!1,isHostEditDialogDisplay:!1,websocket:{it:null,closed:!0},log:"",input:null,header:"BanGround-Konsole Version 0.2.0\nAuthor: GEEKiDoS, ReiKohaku\n"}},computed:{host:{get:function(){return this.$store.state.host},set:function(t){this.$store.commit("updateHost",t)}}},methods:{stdout:function(t){var e=t;this.log="".concat(this.log).concat(e,"\r"),this.autoLocate()},autoLocate:function(){var t=document.getElementById("locator"),e=l["a"].getScrollTarget(t),o=t.offsetTop-t.scrollHeight,s=100;l["a"].setScrollPosition(e,o,s)},onSelectEvent:function(){this.$refs.selectInput.$el.click()},airdrop:function(t){var e=this;this.isAirDropDialogDisplay=!1,this.disable=!0;try{for(var o=0;o<t.length;o++){var s=t[o];if(s.name.endsWith(".kirapack")){this.stdout("Transfer ".concat(s.name,"..."));var i=new FileReader;i.onloadend=function(t){t.target.readyState==FileReader.DONE&&e.$axios.put("http://".concat(e.host,":8088/airdrop"),t.target.result)},i.readAsArrayBuffer(s)}}}catch(a){}this.disable=!1},onDrop:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white",this.airdrop(t.dataTransfer.files)},onDragLeave:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white"},onDragEnter:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},onDragOver:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},createValue:function(t,e){t.length>0&&(u.includes(t)||u.push(t),e(t,"toggle"),this.submit())},filterFn:function(t,e,o){var s=this;t.length<1?o():e((function(){if(""===t)s.filterOptions=u;else{var e=t.toLowerCase();s.filterOptions=u.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}))},deleOption:function(t){t===this.model&&(this.model=null);var e=u.indexOf(t);u=u.splice(e,1)},submit:function(){var t=this;return c()(n.a.mark((function e(){var o;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.input){e.next=2;break}return e.abrupt("return");case 2:if(o=t.input.replace(/(^\s*)|(\s*$)/g,""),0!==o.length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.websocket.it.send(o);case 7:t.stdout(o),t.input=null;case 9:case"end":return e.stop()}}),e)})))()},initWebSocket:function(){this.stdout("==== Init WebSocket ===="),window.WebSocket||this.stdout("!!! This browser does not support WebSocket!"),this.websocketConnect()},websocketConnect:function(){var t="ws://".concat(this.host,":8088/websocket");this.websocket.it=new WebSocket(t),this.websocket.it.onmessage=this.websocketOnMessage,this.websocket.it.onopen=this.websocketOnOpen,this.websocket.it.onerror=this.websocketOnError,this.websocket.it.onclose=this.websocketClose,this.websocket.closed=!1},websocketOnMessage:function(t){try{var e=JSON.parse(t.data),o=[];if(e["mHeaders"]&&(o=e["mHeaders"]),e["cHeaders"])for(var s in this.stdout("==== Chart List ===="),e["cHeaders"]){var i=e["cHeaders"][s];if(this.stdout("[".concat(i.sid,"]")),o)for(var a in o)o[a].mid===i.mid&&(this.stdout("  Title: ".concat(o[a].title)),this.stdout("  Artist: ".concat(o[a].artist)));else this.stdout("  Music: ".concat(i.mid));for(var n in this.stdout("  Author: ".concat(i.author)),this.stdout("  Difficulties:"),i.difficultyLevel){var r=["Easy","Normal","Hard","Expert","Special"];-1!=i.difficultyLevel[n]&&this.stdout("    ".concat(r[n]," ").concat(i.difficultyLevel[n]))}this.stdout("")}}catch(c){this.stdout(t.data)}},websocketOnOpen:function(){this.stdout("==== Init WebSocket Successfully ====")},websocketOnError:function(t){this.stdout("!!! A WebSocket error occurred"),this.stdout("==== Reconnecting WebSocket ===="),this.websocketConnect()},websocketClose:function(t){this.stdout("==== WebSocket Connection Closed ====")}},destroyed:function(){this.websocket.it.close()},mounted:function(){var t=this;return c()(n.a.mark((function e(){return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.title="BanGround Konsole",t.autoLocate=Object(d["a"])(t.autoLocate,100),t.stdout(t.header),t.initWebSocket();case 4:case"end":return e.stop()}}),e)})))()}},f=p,h=o("2877"),b=o("4d5a"),m=o("e359"),k=o("65c6"),v=o("6ac5"),g=o("9c40"),w=o("24e8"),D=o("f09f"),y=o("a370"),q=o("2c91"),S=o("27f9"),x=o("09e3"),C=o("9989"),O=o("7ff0"),E=o("0378"),Q=o("ddd8"),_=o("66e5"),H=o("4074"),L=o("0170"),A=o("0016"),P=o("7f67"),$=o("eebe"),I=o.n($),W=Object(h["a"])(f,s,i,!1,null,null,null);e["default"]=W.exports;I()(W,"components",{QLayout:b["a"],QHeader:m["a"],QToolbar:k["a"],QToolbarTitle:v["a"],QBtn:g["a"],QDialog:w["a"],QCard:D["a"],QCardSection:y["a"],QSpace:q["a"],QInput:S["a"],QPageContainer:x["a"],QPage:C["a"],QFooter:O["a"],QForm:E["a"],QSelect:Q["a"],QItem:_["a"],QItemSection:H["a"],QItemLabel:L["a"],QIcon:A["a"]}),I()(W,"directives",{ClosePopup:P["a"]})}}]);