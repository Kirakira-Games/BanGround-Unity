(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"8b24":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},[a("q-header",{staticClass:"bg-dark"},[a("q-toolbar",[a("q-toolbar-title",[t._v("BanGround Konsole")]),a("q-btn",{attrs:{round:"",flat:"",icon:"settings",disable:t.disable},on:{click:function(e){t.isHostEditDialogDisplay=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.isHostEditDialogDisplay,callback:function(e){t.isHostEditDialogDisplay=e},expression:"isHostEditDialogDisplay"}},[a("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Edit Host")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),a("q-card-section",[a("q-input",{attrs:{dark:""},model:{value:t.host,callback:function(e){t.host=e},expression:"host"}})],1)],1)],1)],1),a("q-btn",{attrs:{round:"",flat:"",icon:"add",disable:t.disable},on:{click:function(e){t.isAirDropDialogDisplay=!0}}},[a("q-dialog",{attrs:{persistent:""},model:{value:t.isAirDropDialogDisplay,callback:function(e){t.isAirDropDialogDisplay=e},expression:"isAirDropDialogDisplay"}},[a("q-card",{staticStyle:{width:"60%","min-width":"350px"},attrs:{dark:""}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("Kirapack Air Drop")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{round:"",flat:"",icon:"clear"}})],1),a("q-card-section",[a("div",{ref:"select_frame",staticClass:"full-width text-center column justify-center items-center",staticStyle:{border:"3px dashed white",height:"350px","border-radius":"5px"},on:{dragenter:function(e){return t.onDragEnter(e)},drop:function(e){return t.onDrop(e)},dragleave:function(e){return t.onDragLeave(e)},dragover:function(e){return t.onDragOver(e)}}},[a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{color:"primary",label:"Click to select a kirapack","no-caps":""},on:{click:t.onSelectEvent}}),a("q-input",{ref:"selectInput",staticStyle:{display:"none"},attrs:{type:"file",accept:".kirapack"},on:{change:function(e){return t.airdrop(e.target.files)}}})],1),a("div",{staticClass:"col-auto q-mt-md"},[t._v("\n                  Or drop a kirapack here\n                ")])])])],1)],1)],1)],1)],1),a("q-page-container",[a("q-page",{staticClass:"bg-grey-10 text-white q-pa-md",attrs:{id:"consolePage"}},[a("div",{staticClass:"text-body2 row q-col-gutter-xs",attrs:{id:"outputContainer"}},t._l(t.log,(function(e,i){return a("div",{key:i,staticClass:"col-12",staticStyle:{"white-space":"pre-wrap","word-wrap":"break-word"}},["string"===typeof e?a("div",{staticStyle:{"font-family":"monospace"},domProps:{innerHTML:t._s(e)}}):"object"===typeof e&&"chart_list"===e.type?a("div",[a("q-card",{attrs:{dark:""}},[a("q-card-section",[a("div",{staticClass:"row q-gutter-md"},[a("div",{staticClass:"text-h6"},[t._v("Song List")]),a("q-space"),a("q-btn",{attrs:{flat:"",round:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down"},on:{click:function(t){e.expanded=!e.expanded}}})],1)]),a("q-slide-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"item.expanded"}],staticClass:"row q-col-gutter-md"},t._l(e.data,(function(e){return a("div",{key:e.sid,staticClass:"col-xs-12 col-sm-6 col-md-4"},[a("div",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-12 text-h6"},[t._v("歌曲信息")]),a("div",{staticClass:"col-12"},[t._v("Music ID: "+t._s(e.music.id))]),a("div",{staticClass:"col-12"},[t._v("曲名: "+t._s(e.music.title))]),a("div",{staticClass:"col-12"},[t._v("艺术家: "+t._s(e.music.artist))]),a("div",{staticClass:"col-12 text-h6"},[t._v("谱面信息")]),a("div",{staticClass:"col-12"},[t._v("Chart Set ID: "+t._s(e.sid))]),a("div",{staticClass:"col-12"},[t._v("谱师: "+t._s(e.author))]),a("div",{staticClass:"col-12"},[t._v("难度: "+t._s(e.difficulties.toString()))]),a("div",{staticClass:"col-12"},[a("q-separator",{attrs:{color:"white"}})],1)])])})),0)])],1)],1):t._e()])})),0),a("div",{attrs:{id:"locator"}})])],1),a("q-footer",{staticClass:"q-pa-sm bg-dark"},[a("q-form",{attrs:{autofocus:""},on:{submit:t.submit}},[a("div",{staticClass:"row q-col-gutter-md items-center"},[a("div",{staticClass:"col"},[a("q-input",{attrs:{dark:"",outlined:"",dense:"",autocomplete:"off"},on:{input:t.onInputEvent,keydown:t.onKeyDownEvent},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("q-menu",{attrs:{"no-focus":"",dark:"","auto-close":""},model:{value:t.isAutoCompleteMenuDisplay,callback:function(e){t.isAutoCompleteMenuDisplay=e},expression:"isAutoCompleteMenuDisplay"}},[a("q-list",t._l(t.filterOptions,(function(e){return a("q-item",{key:e.value,attrs:{clickable:"",active:t.input===e.value,dark:""},on:{click:function(a){t.input=e.value}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(e.value))]),a("q-item-label",{attrs:{caption:""}},[t._v(t._s(e.type))])],1)],1)})),1)],1)],1)],1),a("div",{staticClass:"col-auto"},[a("q-btn",{attrs:{type:"submit",label:"Send",dark:"","no-caps":"",disable:!t.websocket.it||1!=t.websocket.it.readyState||t.disable}})],1)])])],1)],1)},s=[],r=(a("ac6a"),a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("06db"),a("7f7f"),a("aef6"),a("c5f6"),a("04ff"),a("a34a")),o=a.n(r),n=(a("96cf"),a("c973")),l=a.n(n),c=(a("a481"),a("0831")),u=a("1c16");function p(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=d(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,n=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){n=!0,r=t},f:function(){try{o||null==a.return||a.return()}finally{if(n)throw r}}}}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var h={name:"PageIndex",data:function(){return{disable:!1,options:[{value:"g_cheats",type:"KVar",help:"Enable Cheats"},{value:"savecfg",type:"Kommand",help:"Save configs"},{value:"exec",type:"Kommand",help:"Execute a config file"},{value:"echo",type:"Kommand",help:"Repeater"},{value:"help",type:"Kommand",help:"List available kommands and kvars"},{value:"snd_bgm_volume",type:"KVar",help:""},{value:"snd_se_volume",type:"KVar",help:""},{value:"snd_igse_volume",type:"KVar",help:""},{value:"cl_language",type:"KVar",help:""},{value:"snd_engine",type:"KVar",help:""},{value:"snd_buffer_bass",type:"KVar",help:""},{value:"snd_buffer_fmod",type:"KVar",help:""},{value:"snd_output",type:"KVar",help:""},{value:"o_judge",type:"KVar",help:""},{value:"o_audio",type:"KVar",help:""},{value:"r_notespeed",type:"KVar",help:""},{value:"r_notesize",type:"KVar",help:""},{value:"r_syncline",type:"KVar",help:""},{value:"r_lanefx",type:"KVar",help:""},{value:"r_graynote",type:"KVar",help:""},{value:"r_mirror",type:"KVar",help:""},{value:"r_bang_perspect",type:"KVar",help:""},{value:"r_shake_flick",type:"KVar",help:""},{value:"r_usevideo",type:"KVar",help:""},{value:"r_farclip",type:"KVar",help:""},{value:"r_brightness_bg",type:"KVar",help:""},{value:"r_brightness_lane",type:"KVar",help:""},{value:"r_brightness_long",type:"KVar",help:""},{value:"cl_showms",type:"KVar",help:""},{value:"cl_elp",type:"KVar",help:""},{value:"cl_offset_transform",type:"KVar",help:""},{value:"cl_notestyle",type:"KVar",help:""},{value:"cl_sestyle",type:"KVar",help:""},{value:"mod_autoplay",type:"KVar",help:""},{value:"cl_cursorter",type:"KVar",help:"Current sorter type"},{value:"cl_lastsid",type:"KVar",help:"Current chart set id"},{value:"demo_play",type:"Kommand",help:"Play a demo file"},{value:"fs_assetpath",type:"KVar",help:""},{value:"fs_iconpath",type:"KVar",help:""}],autoCompleteFirst:"",filterOptions:[],isAirDropDialogDisplay:!1,isHostEditDialogDisplay:!1,isAutoCompleteMenuDisplay:!1,websocket:{it:null,closed:!0},log:[],input:"",header:"BanGround-Konsole Version 0.3.0<br>Author: GEEKiDoS, ReiKohaku<br>"}},computed:{host:{get:function(){return this.$store.state.host},set:function(t){this.$store.commit("updateHost",t)}}},methods:{stdout:function(t){var e=t;"string"===typeof e&&(e=e.replace("\r","<br>").replace("\n","<br>")),this.log.push(e),this.autoLocate()},autoLocate:function(){var t=document.getElementById("locator"),e=c["a"].getScrollTarget(t),a=t.offsetTop-t.scrollHeight,i=100;c["a"].setScrollPosition(e,a,i)},onInputEvent:function(){var t=this;return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isAutoCompleteMenuDisplay=!1,e.next=3,t.onFilterEvent();case 3:case"end":return e.stop()}}),e)})))()},onFilterEvent:function(){var t=this;return l()(o.a.mark((function e(){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.filterOptions=[],t.autoCompleteFirst=t.input,t.input&&""!=t.input&&(a=t.input.toLowerCase(),t.filterOptions=t.options.filter((function(t){return t.value.toLowerCase().indexOf(a)>-1}))),t.filterOptions&&t.filterOptions.length>0&&(t.isAutoCompleteMenuDisplay=!0);case 4:case"end":return e.stop()}}),e)})))()},onKeyDownEvent:function(t){if(9===t.keyCode){if(this.filterOptions&&this.filterOptions.length>0){for(var e in t.stopPropagation(),t.preventDefault(),this.filterOptions){var a=Number.parseInt(e);if(this.filterOptions[a].value===this.input)return void(this.input=this.filterOptions[a+1]?this.filterOptions[a+1].value:this.autoCompleteFirst)}this.input=this.filterOptions[0].value}}else if(38===t.keyCode){if(this.filterOptions&&this.filterOptions.length>0){for(var i in t.stopPropagation(),t.preventDefault(),this.filterOptions){var s=Number.parseInt(i);if(this.filterOptions[s].value===this.input)return void(this.input=this.filterOptions[s-1]?this.filterOptions[s-1].value:this.input)}this.input=this.filterOptions[0].value}}else if(40===t.keyCode&&this.filterOptions&&this.filterOptions.length>0){for(var r in t.stopPropagation(),t.preventDefault(),this.filterOptions){var o=Number.parseInt(r);if(this.filterOptions[o].value===this.input)return void(this.input=this.filterOptions[o+1]?this.filterOptions[o+1].value:this.input)}this.input=this.filterOptions[0].value}},onSelectEvent:function(){this.$refs.selectInput.$el.click()},airdrop:function(t){var e=this;this.isAirDropDialogDisplay=!1,this.disable=!0;try{for(var a=0;a<t.length;a++){var i=t[a];if(i.name.endsWith(".kirapack")){this.stdout("Transfer ".concat(i.name,"..."));var s=new FileReader;s.onloadend=function(t){t.target.readyState==FileReader.DONE&&e.$axios.put("http://".concat(e.host,"/airdrop"),t.target.result)},s.readAsArrayBuffer(i)}}}catch(r){}this.disable=!1},onDrop:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white",this.airdrop(t.dataTransfer.files)},onDragLeave:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed white"},onDragEnter:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},onDragOver:function(t){t.stopPropagation(),t.preventDefault(),this.$refs.select_frame.style.border="3px dashed red"},submit:function(){var t=this;return l()(o.a.mark((function e(){var a;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.input){e.next=2;break}return e.abrupt("return");case 2:if(a=t.input.replace(/(^\s*)|(\s*$)/g,""),0!==a.length){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,t.websocket.it.send(a);case 7:t.stdout(a),t.input=null;case 9:case"end":return e.stop()}}),e)})))()},initWebSocket:function(){this.stdout("==== Init WebSocket ===="),window.WebSocket||this.stdout("!!! This browser does not support WebSocket!"),this.websocketConnect()},websocketConnect:function(){var t="ws://".concat(this.host,"/websocket");this.websocket.it=new WebSocket(t),this.websocket.it.onmessage=this.websocketOnMessage,this.websocket.it.onopen=this.websocketOnOpen,this.websocket.it.onerror=this.websocketOnError,this.websocket.it.onclose=this.websocketClose,this.websocket.closed=!1},websocketOnMessage:function(t){try{var e=JSON.parse(t.data),a=[];if(e["mHeaders"]&&(a=e["mHeaders"]),e["cHeaders"]){var i,s={type:"chart_list",expanded:!1,data:[]},r=p(e["cHeaders"]);try{for(r.s();!(i=r.n()).done;){var o=i.value,n={id:o.mid,title:null,artist:null};if(a){var l,c=p(a);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u.mid===o.mid){n.title=u.title,n.artist=u.artist;break}}}catch(d){c.e(d)}finally{c.f()}}s.data.push({sid:o.sid,music:n,author:o.author,difficulties:o["difficultyLevel"]})}}catch(d){r.e(d)}finally{r.f()}this.stdout(s)}}catch(f){this.stdout(t.data)}},websocketOnOpen:function(){var t=this;return l()(o.a.mark((function e(){var a,i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.stdout("==== Init WebSocket Successfully ===="),e.prev=1,t.stdout("Getting commands list..."),e.next=5,t.$axios.get("http://".concat(t.host,"/commands"));case 5:a=e.sent,i=a.data,t.options=i,t.stdout("Get commands list successfully."),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),t.stdout("Get command list failed, error:"),t.stdout(e.t0.toString());case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},websocketOnError:function(t){this.stdout("!!! A WebSocket error occurred"),this.stdout("==== Reconnecting WebSocket ===="),this.websocketConnect()},websocketClose:function(t){this.stdout("==== WebSocket Connection Closed ====")}},destroyed:function(){this.websocket.it.close()},mounted:function(){var t=this;return l()(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:document.title="BanGround Konsole",t.autoLocate=Object(u["a"])(t.autoLocate,100),t.onFilterEvent=Object(u["a"])(t.onFilterEvent,500),t.stdout(t.header),t.initWebSocket();case 5:case"end":return e.stop()}}),e)})))()}},v=h,m=a("2877"),y=a("4d5a"),b=a("e359"),g=a("65c6"),w=a("6ac5"),k=a("9c40"),_=a("24e8"),C=a("f09f"),D=a("a370"),x=a("2c91"),q=a("27f9"),K=a("09e3"),O=a("9989"),S=a("e9c1"),V=a("eb85"),E=a("7ff0"),A=a("0378"),Q=a("4e73"),I=a("1c1c"),L=a("66e5"),H=a("4074"),P=a("0170"),$=a("7f67"),F=a("eebe"),M=a.n(F),T=Object(m["a"])(v,i,s,!1,null,null,null);e["default"]=T.exports;M()(T,"components",{QLayout:y["a"],QHeader:b["a"],QToolbar:g["a"],QToolbarTitle:w["a"],QBtn:k["a"],QDialog:_["a"],QCard:C["a"],QCardSection:D["a"],QSpace:x["a"],QInput:q["a"],QPageContainer:K["a"],QPage:O["a"],QSlideTransition:S["a"],QSeparator:V["a"],QFooter:E["a"],QForm:A["a"],QMenu:Q["a"],QList:I["a"],QItem:L["a"],QItemSection:H["a"],QItemLabel:P["a"]}),M()(T,"directives",{ClosePopup:$["a"]})}}]);